<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Fresco | 使用Drawee呈现不同的效果</title>
    <link rel='stylesheet' href='/static/site.css' type='text/css'/>
    <link rel="stylesheet" href='/static/pygments.css' type='text/css'/>
    <link rel='shortcut icon' href='/static/favicon.png'>
    <meta name='viewport' content='width=480'>
    <meta property="og:title" content="使用Drawee呈现不同的效果" />
    <meta property="og:site_name" content="fresco">
    <meta property='og:description' content='Fresco is an image management library.'>
    <meta property='og:image' content='http://facebook.github.io/fresco/static/fresco-og-image.png'>
    <meta property='og:url' content="http://facebook.github.io/fresco/docs/drawee-components.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script>
    <script type="text/javascript">{'try{Typekit.load();}catch(e){}'}</script>
    <!-- Google Analytics -->
</head>
<body>

<header class='topbar'><nav class='width'>
<a href='/'>
  <img src="/static/fresco-logo.png" class="logo">
</a>
    <ul>
      <li><a href="/docs/index.html#_"
          
          class="active" >
          文档
      </a></li>
      <li><a href="/"
          >
          关于
      </a></li>
      <li><a href="/support.html"
          >
          支持
      </a></li>
      <li><a href="/javadoc">
          API
      </a></li>
      <li><a href="http://github.com/facebook/fresco">GitHub</a>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>配置和使用</h3>
      <ul>
        
          <li>
            <a href="/docs/download-fresco.html#_">
              下载
            </a>
            
          </li>
        
          <li>
            <a href="/docs/index.html#_">
              配置和开始使用
            </a>
            
          </li>
        
          <li>
            <a href="/docs/concepts.html#_">
              关键概念
            </a>
            
          </li>
        
          <li>
            <a href="/docs/supported-uris.html#_">
              支持的 URIs
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Drawee 指南</h3>
      <ul>
        
          <li>
            <a href="/docs/using-drawees-xml.html#_">
              在XML中使用 Drawees
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-drawees-code.html#_">
              在Java代码中使用 Drawees
            </a>
            
          </li>
        
          <li>
            <a href="/docs/drawee-components.html#_" class="active">
              Drawee 模块的组成
            </a>
            
          </li>
        
          <li>
            <a href="/docs/scaling.html#_">
              缩放
            </a>
            
          </li>
        
          <li>
            <a href="/docs/rounded-corners-and-circles.html#_">
              圆角/圆圈
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-controllerbuilder.html#_">
              使用ControllerBuilder
            </a>
            
          </li>
        
          <li>
            <a href="/docs/progressive-jpegs.html#_">
              Progressive JPEGs
            </a>
            
          </li>
        
          <li>
            <a href="/docs/animations.html#_">
              Animated Images
            </a>
            
          </li>
        
          <li>
            <a href="/docs/requesting-multiple-images.html#_">
              Requesting Multiple Images
            </a>
            
          </li>
        
          <li>
            <a href="/docs/listening-download-events.html#_">
              监听下载事件
            </a>
            
          </li>
        
          <li>
            <a href="/docs/resizing-rotating.html#_">
              缩放和旋转
            </a>
            
          </li>
        
          <li>
            <a href="/docs/modifying-image.html#_">
              图片的修改
            </a>
            
          </li>
        
          <li>
            <a href="/docs/image-requests.html#_">
              Image Requests
            </a>
            
          </li>
        
          <li>
            <a href="/docs/writing-custom-views.html#_">
              Writing Custom Views
            </a>
            
          </li>
        
          <li>
            <a href="/docs/gotchas.html#_">
              Gotchas
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Image Pipeline 指南</h3>
      <ul>
        
          <li>
            <a href="/docs/intro-image-pipeline.html#_">
              什么是Image Pipeline
            </a>
            
          </li>
        
          <li>
            <a href="/docs/configure-image-pipeline.html#_">
              Image Pipeline的配置
            </a>
            
          </li>
        
          <li>
            <a href="/docs/caching.html#_">
              缓存的行为控制
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-image-pipeline.html#_">
              直接使用Image Pipeline
            </a>
            
          </li>
        
          <li>
            <a href="/docs/datasources-datasubscribers.html#_">
              数据源/订阅数据源
            </a>
            
          </li>
        
          <li>
            <a href="/docs/closeable-references.html#_">
              Closeable References
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>第三方类库</h3>
      <ul>
        
          <li>
            <a href="/docs/using-other-network-layers.html#_">
              自定义网络加载
            </a>
            
          </li>
        
          <li>
            <a href="/docs/using-other-image-loaders.html#_">
              使用其他的Image Loader
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>
      使用Drawee呈现不同的效果
      <a class="edit-page-link" href="https://github.com/facebook/fresco/tree/gh-pages/docs/01-drawee-components.md" target="_blank">Edit on GitHub</a>
    </h1>
    <p></p>

    <h2>内容导航</h2>

<ul>
<li><a href="#Definitions">定义</a></li>
<li><a href="#Actual">设置要加载的图片</a></li>
<li><a href="#Placeholder">占位图</a></li>
<li><a href="#Failure">加载失败时的占位图</a></li>
<li><a href="#%E7%82%B9%E5%87%BB%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD(Retry)">点击重新加载</a></li>
<li><a href="#%E8%BF%9B%E5%BA%A6%E6%9D%A1(ProgressBar)">进度条(ProgressBar)</a></li>
<li><a href="#Backgrounds">Backgrounds</a></li>
<li><a href="#Overlays">Overlays</a></li>
<li><a href="#PressedStateOverlay">Pressed State Overlay</a></li>
</ul>

<h2><a name='Definitions'></a>定义</h2>

<p>本页说明如何设置实现不同的图片呈现效果。</p>

<p>除了要加载的图片，其他各个设置都可以在xml中指定。在xml中指定的时候，可以是drawable/下的资源，也可以颜色。</p>

<p>在Java 代码中也可以指定。如果需要 <a href="using-drawees-code.html">通过程序设定</a> 的话会接触到这个类: <a href="../javadoc/reference/com/facebook/drawee/generic/GenericDraweeHierarchyBuilder.html">GenericDraweeHierarchyBuilder</a> </p>

<p>通过代码设置是，设置的值可以是资源id，也可以是Drawable的子类。</p>

<p>创建完<a href="../javadoc/reference/com/facebook/drawee/generic/GenericDraweeHierarchy.html">GenericDraweeHierarchy</a>之后，也可以通过该类的相关方法，重新设置一些效果。</p>

<p>大多数的用户呈现不同效果的drawables都是可以<a href="scaling.html">缩放的</a>.</p>

<h2><a name='Actual'></a>设置要加载的图</h2>

<p>除了需要下载的图片是真正必须的，其他的都是可选的。如前所述，图片可以来自多个地方。</p>

<p>所需下载的图片实际是DraweeController的一个属性，而不是DraweeHierarchy的属性。</p>

<p>可使用<code>setImageURI</code>方法或者<a href="using-controllerbuilder.html">通过设置DraweeController</a> 来进行设置。</p>

<p>This is a property of the controller, not the hierarchy. It therefore is not set by any of the methods used by the other Drawee components.</p>

<p>对于可缩放的类型，DraweeHierarchy 仅对所需下载的图片属性</p>

<p>In addition to the scale type, the hierarchy exposes other methods only for the actual image. These are:</p>

<ul>
<li>focus point (used for the <a href="scaling.html#FocusCrop">focusCrop</a> scale type only)</li>
<li>color filter</li>
</ul>

<p>默认的缩放类型是: <code>centerCrop</code></p>

<h2><a name="Placeholder"></a>占位图(Placeholder)</h2>

<p>The <em>placeholder</em> is shown in the Drawee when it first appears on screen. After you have called <code>setController</code> or <code>setImageURI</code> to load an image, the placeholder continues to be shown until the image has loaded. </p>

<p>In the case of a progressive JPEG, the placeholder only stays until your image has reached the quality threshold, whether the default, or one set by your app.</p>

<p>XML attribute: <code>placeholderImage</code><br>
Hierarchy builder method: <code>setPlaceholderImage</code><br>
Hierarchy method: <code>setPlaceholderImage</code><br>
Default value: a transparent <a href="http://developer.android.com/reference/android/graphics/drawable/ColorDrawable.html">ColorDrawable</a><br>
Default scale type: <code>centerInside</code>  </p>

<h2>设置加载失败占位图</h2>

<p>The <em>failure</em> image appears if there is an error loading your image. The most common cause of this is an invalid URI, or lack of connection to the network.</p>

<p>XML attribute: <code>failureImage</code><br>
Hierarchy builder method: <code>setFailureImage</code><br>
Default value: The placeholder image<br>
Default scale type: <code>centerInside</code></p>

<h2>设置：点击重新加载图</h2>

<p>The <em>retry</em> image appears instead of the failure image if you have set your controller to enable the tap-to-retry feature. </p>

<p>You must <a href="using-controllerbuilder.html">build your own Controller</a> to do this. Then add the following line</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">.</span><span class="na">setTapToRetryEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
</code></pre></div>
<p>The image pipeline will then attempt to retry an image if the user taps on it. Up to four attempts are allowed before the failure image is shown instead.</p>

<p>XML attribute: <code>retryImage</code><br>
Hierarchy builder method: <code>setRetryImage</code><br>
Default value: The placeholder image<br>
Default scale type: <code>centerInside</code></p>

<h2><a name="ProgressBar"></a>Progress Bar</h2>

<p>If specified, the <em>progress bar</em> image is shown as an overlay over the Drawee until the final image is set.</p>

<p>Currently the progress bar remains the same throughout the image load; actually changing in response to progress is not yet supported.</p>

<p>XML attribute: <code>progressBarImage</code><br>
Hierarchy builder method: <code>setProgressBarImage</code><br>
Default value: None<br>
Default scale type: <code>centerInside</code></p>

<h2>Backgrounds</h2>

<p><em>Background</em> drawables are drawn first, &quot;under&quot; the rest of the hierarchy. </p>

<p>Only one can be specified in XML, but in code more than one can be set. In that case, the first one in the list is drawn first, at the bottom.</p>

<p>Background images don&#39;t support scale-types and are scaled to the Drawee size. </p>

<p>XML attribute: <code>backgroundImage</code><br>
Hierarchy builder method: <code>setBackground,</code> <code>setBackgrounds</code><br>
Default value: None<br>
Default scale type: N/A</p>

<h2>Overlays</h2>

<p><em>Overlay</em> drawables are drawn last, &quot;over&quot; the rest of the hierarchy. </p>

<p>Only one can be specified in XML, but in code more than one can be set. In that case, the first one in the list is drawn first, at the bottom.</p>

<p>Overlay images don&#39;t support scale-types and are scaled to the Drawee size. </p>

<p>XML attribute: <code>overlayImage</code><br>
Hierarchy builder method: <code>setOverlay,</code> <code>setOverlays</code><br>
Default value: None<br>
Default scale type: N/A</p>

<h2><a name="PressedStateOverlay"></a>Pressed State Overlay</h2>

<p>The <em>pressed state overlay</em> is a special overlay shown only when the user presses the screen area of the Drawee. For example, if the Drawee is showing a button, this overlay could have the button change color when pressed.</p>

<p>The pressed state overlay doesn&#39;t support scale-types.</p>

<p>XML attribute: <code>pressedStateOverlayImage</code><br>
Hierarchy builder method: <code>setPressedStateOverlay</code><br>
Default value: None<br>
Default scale type: N/A</p>


    <div class="docs-prevnext">
      
        <a href="/docs/using-drawees-code.html#_">&larr; 上一页</a>
      
      
        <a class="right" href="/docs/scaling.html#_">下一页 &rarr;</a>
      
    </div>

    <a id="_"></a>
</article>

</div></section>
<footer><div class='width'>
    &copy; Copyright 2015, Facebook Inc.
</div></footer>

<script src="/static/linkify.js"></script>
<!-- Google Analytics -->
</body>
</html>

